{$_modx->setPlaceholder('fullCost', $order.cost)}
<div class="uibox-container">
    <h1>{$_modx->resource.pagetitle}</h1>
    <form class="ms2_form order-form" id="msOrder" method="post">
        <div class="uibox-row">
            <div class="col s6">
                <div class="order-row receiver-info active">
                    <div class="subtitle num-title">{'ms2_frontend_credentials' | lexicon}</div>
                    <div class="order-checkin-data-row">
                        <div class="order-checkin-data"></div>
                        <button type="button" class="order-checkin-data-change">Изменить</button>
                    </div>
                    <div class="form-block">
                        {foreach ['receiver','phone','email'] as $field}
                            <div class="form-group">
                                <input type="text" id="{$field}" placeholder="{('ms2_frontend_' ~ $field) | lexicon}"
                                        name="{$field}" value="{$form[$field]}"
                                        class="input-text outlined form-control{($field in list $errors) ? ' error' : ''}">
                            </div>
                        {/foreach}
                        <button type="button" class="btn btn-primary primary small order-step-btn">Далее</button>
                    </div>
                    
                </div>
            
                <div class="order-row">
                    <div class="subtitle num-title">{'delivery_block_title' | lexicon}</div>
                    <div class="order-checkin-data-row">
                        <div class="order-checkin-data"></div>
                        <button type="button" class="order-checkin-data-change">Изменить</button>
                    </div>
                    <div class="form-block">
                        {foreach ['city'] as $field}
                            <div class="form-group">
                                <label class="form-label" for="{$field}">
                                    {('ms2_frontend_' ~ $field) | lexicon} <span class="required-star">*</span>
                                </label>
                                <input type="text" id="{$field}" placeholder="Выберите город"
                                        name="{$field}" value="{$form[$field]}"
                                        class="oredr-city-input input-text outlined form-control{($field in list $errors) ? ' error' : ''}">
                                <ul class="order-cities-list">
                                    <li><button type="button" class="q-city">Киев</button></li>
                                    <li><button type="button" class="q-city">Днепр</button></li>
                                    <li><button type="button" class="q-city">Харьков</button></li>
                                    <li><button type="button" class="q-city">Одесса</button></li>
                                    <li><button type="button" class="q-city">Львов</button></li>
                                </ul>
                            </div>
                        {/foreach}

                        <div id="deliveries" class="deliveries">
                            <div class="subtitle">{'ms2_frontend_deliveries' | lexicon}:</div>
                            <div class="form-group">
                                <div class="delivery-group">
                                    {foreach $deliveries as $delivery index=$index}
                                        {var $checked = !($order.delivery in keys $deliveries) && $index == 0 || $delivery.id == $order.delivery}
                                        {switch $delivery.id}
                                            {case '2'}
                                                <div class="delivery-item uibox-row">
                                                    <div class="delivery-item-left">
                                                        <label class="custom-radio">
                                                            <input class="hidden" type="radio" name="delivery" value="{$delivery.id}" id="delivery_{$delivery.id}"
                                                                data-payments="{$delivery.payments | json_encode}"
                                                                {$checked ? 'checked' : ''}>
                                                            <div class="custom-radio-outer">
                                                                <div class="custom-radio-checked"></div>
                                                            </div>
                                                        </label>
                                                    </div>
                                                    <div class="delivery-item-right">
                                                        <label class="delivery" for="delivery_{$delivery.id}">
                                                            Доставка в отделении "Новая почта" Стоимость доставки: <b>{$delivery.price} {'ms2_frontend_currency' | lexicon}</b>
                                                        </label>
                                                        <div class="delivery-block">
                                                            <div class="form-group">
                                                                <div class="col s12 uibox-row inputs-row">
                                                                    <input type="text" name="warehouse" class="input-text outlined" placeholder="Укажите отделение">
                                                                    <a class="primary-text get-np-map" href="">Выбрать на карте</a>
                                                                </div>
                                                                <p>Бесплатная доставка по Киеву от <b>10 000</b> грн</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            {case '1'}
                                                <div class="delivery-item uibox-row">
                                                    <div class="delivery-item-left">
                                                        <label class="custom-radio">
                                                            <input class="hidden" type="radio" name="delivery" value="{$delivery.id}" id="delivery_{$delivery.id}"
                                                                data-payments="{$delivery.payments | json_encode}"
                                                                {$checked ? 'checked' : ''}>
                                                            <div class="custom-radio-outer">
                                                                <div class="custom-radio-checked"></div>
                                                            </div>
                                                        </label>
                                                    </div>
                                                    <div class="delivery-item-right">
                                                        <label class="delivery" for="delivery_{$delivery.id}">
                                                            Самовывоз из магазина Стоимость доставки: <b>бесплатно</b>
                                                        </label>
                                                    </div>
                                                </div>
                                        {/switch}
                                    {/foreach}
                                </div>
                                <button type="button" class="btn btn-primary primary small order-step-btn">Далее</button>
                            </div>
                        </div>
                    </div> 
                </div>
            
                <div class="order-row" id="payments">
                    <div class="subtitle num-title">{'payment_block_title' | lexicon}</div>
                    <div class="form-block payments-block">
                        <div class="subtitle">{'ms2_frontend_payments' | lexicon}</div>
                        {foreach $payments as $payment index=$index}
                            {var $checked = !($order.payment in keys $payments) && $index == 0 || $payment.id == $order.payment}
                            <div class="form-group">
                                <label class="custom-radio">
                                    <input class="hidden" type="radio" name="payment" value="{$payment.id}" id="payment_{$payment.id}"{$checked ? 'checked' : ''}>
                                    <div class="custom-radio-outer">
                                        <div class="custom-radio-checked"></div>
                                    </div>
                                    <span class="custom-radio-title">{$payment.name}</span>
                                </label>
                            </div>
                        {/foreach}
                    </div>
                </div>
            </div>
            <div class="col s5 offset-1">{$_modx->runSnippet('!msCart', ['tpl' => '@FILE chunks/cart/cart.html'])}</div>
        </div>
    </form>
</div>